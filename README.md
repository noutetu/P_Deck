# 🌟 P-Deck

**ポケモン TCG ポケット（ポケポケ）対応の非公式カード検索 & デッキ構築アプリ**
個人開発・スマートフォン向け（iOS / Android）

---

## 📖 目次

1. [概要](#概要)
2. [背景と課題](#背景と課題)
3. [主な機能](#主な機能)
4. [技術スタック](#技術スタック)
5. [アーキテクチャ](#アーキテクチャ)
6. [設計・実装のポイント](#設計・実装のポイント)
7. [ビルド方針と配布バイナリ](#ビルド方針と配布バイナリ)
8. [著者](#著者)
9. [ライセンス / 権利表記](#ライセンス--権利表記)

---

## 概要

| 項目          | 内容                                     |
| ----------- | -------------------------------------- |
| **開発期間**    | 2025-04-10 〜 2025-05-29（約 1 か月半）       |
| **開発形態**    | 個人開発                                   |
| **総コード量**   | 43 ファイル / 約 20 000 行                   |
| **使用エディタ**  | Unity 6000.1.4f1 + VS Code             |
| **バージョン管理** | Git (GitHub / SourceTree)              |
| **平均開発時間**  | 5 h/日 × 45 日 ≒ 225 h                   |
| **AI 活用**   | ChatGPT（開発全般の補助）、Claude（リファクタリング案や実装案の提案） |
| **テーマ**     | ポケポケ“ガチ勢”向けカード検索 / デッキ構築支援             |

---

## 背景と課題

公式アプリ *Pokémon TCG Pocket* では――

* ひらがな検索が出来ない
* 技効果テキスト検索が出来ない
* 絞り込める項目が少ない

> **➡ ガチ勢が「欲しいカードを瞬時に探す」には不十分**

そこで **P-Deck** では *高速・高精度な検索体験* と
*デッキ編集～山札シミュレーション* をワンストップで提供します。

---

## 主な機能

| カテゴリ        | 機能                                                                           |
| ----------- | ---------------------------------------------------------------------------- |
| **カード検索**   | - 名前 / ひらがな / 技テキスト全文検索<br>- 進化段階・EX/非EX・HP・エネルギー・逃げコスト等の多段フィルター             |
| **デッキ構築**   | - ダブルタップでカード追加 / 長押しで削除<br>- デッキごとにメモ保存<br>- 山札シャッフル|
| **自動データ更新** | クラウド(JSON)に新カードを置くだけで **アプリ更新なし** で反映                                        |
| **UX 向上**   | - 階層型キャッシュで画像を即表示 & オフライン表示可<br>- TrueShadow でリッチな UI（※アセットはリポジトリ非同梱）        |

---

## 技術スタック

| レイヤ     | 採用技術 / ライブラリ                   | 目的                                 |
| ------- | ------------------------------ | ---------------------------------- |
| ゲームエンジン | Unity 6000.1.4f1 / C#          | クロスプラットフォーム開発                      |
| 非同期処理   | **UniTask**                    | Task より軽量な async/await             |
| リアクティブ  | **UniRx**                      | UI とデータを自動同期                       |
| データ取得   | UnityWebRequest + GitHub Pages | JSON / 画像を HTTP GET                |
| アーキテクチャ | **MV(R)P**                     | Model / View / (Reactive)Presenter |
| 画像キャッシュ | 3 階層 (Memory → Disk → Network) | 高速表示・通信量削減・バッテリ節約                  |
| UI      | TrueShadow, DOTween            | ソフトシャドウ・アニメーション                    |
---

## ⚠️ このリポジトリについて

* **コード (`.cs`) とドキュメントのみ** を収録しています。  
  * UI のソフトシャドウには **有料アセット「TrueShadow」** を使用しており、  
    ライセンス上リポジトリへ同梱できません。  
  * 画像 / Prefab / Scene などのリソースも除外しています。
* そのため **クローン直後に Unity で開いてもビルドはできません**。  
  動作確認は下記の配布バイナリ (APK / TestFlight) をご利用ください。
---

## アーキテクチャ

### 1. MV(R)P パターン

```
+--------------+      ユーザー操作       +-----------+
|   SearchView |  --------------------▶ | SearchModel|
|   (画面)     | ◀--------------------  |(検索ロジック)|
+--------------+     結果通知           +-----------+
         ▲                                   ▲
         │             仲介・制御             │
         └───────── SearchPresenter ─────────┘
```

* **責務を分離**しテスト容易・拡張性高
* Model と View を疎結合に保ち、UI 追加も Presenter で完結

### 2. 階層型キャッシュ

```
[Memory] → [Disk (persistentDataPath)] → [Network]
```

1. **メモリ**ヒットで待ち時間ゼロ
2. ヒットしなかった場合は **ディスク**へ（オフライン可 / 通信量削減）
3. 両方に無ければ **ネットワーク**取得 → 上位層へ保存

> 古端末でも安定動作。

---

## 設計・実装のポイント

| 項目              | 具体策                                                        |
| --------------- | ---------------------------------------------------------- |
| **Reactive UI** | `Observable.EveryUpdate()` + `Throttle` で検索入力を 0.3 s デバウンス |
| **画像遅延読み込み**    | `SimpleVirtualScroll` 内で表示領域に入ったカードのみ `UniTask` で取得        |
| **段階的初期化**      | `UniTask.WhenAll()` で カードを並列ダウンロード
| **自動カード追加**     | GitHubで JSON を差し替え → 起動時に最新版を取得                 |
| **コメント規約**      | すべてのクラス / メソッドに “目的/処理”などを記述                 |

---

## ビルド方針と配布バイナリ

> **⚠ リポジトリには `.cs` & ドキュメントのみ**（画像・Prefab など無し）

| シチュエーション       | ビルド可否       | 理由                |
| -------------- | ----------- | ----------------- |
| リポジトリ clone 直後 | ❌ **不可**    | TrueShadow や画像が欠落 |
| 下記バイナリ利用       | ✅ **実行のみ可** | 端末にインストールして動作確認   |

| プラットフォーム    | インストール方法                                                                                                                                                                                |
| ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **iOS**     | TestFlight → [https://testflight.apple.com/join/EQM3bd2Q](https://testflight.apple.com/join/EQM3bd2Q)                                                                                   |
| **Android** | APK 直リンク → [https://drive.google.com/drive/folders/1Zr6jSzu8LZTCF0Eaj9QZ0nzhCK8mNAhm?usp=sharing](https://drive.google.com/drive/folders/1Zr6jSzu8LZTCF0Eaj9QZ0nzhCK8mNAhm?usp=sharing) |

---

## 著者

**吉田 月輝 / Yoshida Runaki**
*文系学部出身・2024 年 3 月から独学で Unity を開始。

> 「実務の現場で学びながら、早期に貢献できるエンジニアを目指します」

---
## ⚖️ ライセンス / 権利表記

Pokémon、Nintendo、Creatures Inc.、GAME FREAK inc.、DeNA など関連各社が保有する商標・著作権・その他一切の知的財産権は、すべて **権利者に帰属** します。本プロジェクトは **非公式の個人開発** であり、これらの権利を侵害する意図は一切ありません。

万が一、権利者様より削除や非公開化などの要請を受けた際には、**速やかに該当データの削除・公開停止など適切な措置** を講じます。

---
> **動作動画**: [https://youtube.com/shorts/GR6SsXOYB6c?si=BmKrA4wTPoU67YMw)
