# 🌟 P-Deck

**ポケモン TCG ポケット（ポケポケ）対応の非公式カード検索 & デッキ構築アプリ**
個人開発・スマートフォン向け（iOS / Android）

---

## 📖 目次

1. [概要](#概要)
2. [背景と課題](#背景と課題)
3. [主な機能](#主な機能)
4. [技術スタック](#技術スタック)
5. [アーキテクチャ](#アーキテクチャ)
6. [設計・実装のポイント](#設計・実装のポイント)
7. [ビルド方針と配布バイナリ](#ビルド方針と配布バイナリ)
8. [著者](#著者)
9. [ライセンス / 権利表記](#ライセンス--権利表記)

---

## 概要

| 項目          | 内容                                     |
| ----------- | -------------------------------------- |
| **開発期間**    | 2025-04-10 〜 2025-05-15（約 1 か月半）       |
| **開発形態**    | 個人開発                                   |
| **総コード量**   | 43 ファイル / 約 20 000 行                   |
| **使用エディタ**  | Unity 2022.3.6f1 + VS Code             |
| **バージョン管理** | Git (GitHub / SourceTree)              |
| **平均開発時間**  | 5 h/日 × 45 日 ≒ 225 h                   |
| **AI 活用**   | ChatGPT（設計・実装補助）、Claude（リファクタリング案の壁打ち） |
| **テーマ**     | ポケポケ“ガチ勢”向けカード検索 / デッキ構築支援             |

---

## 背景と課題

公式アプリ *Pokémon TCG Pocket* では――

* ひらがな検索が出来ない
* 技効果テキスト検索が出来ない
* フィルター UI が煩雑

> **➡ ガチ勢が「欲しいカードを瞬時に探す」には不十分**

そこで **P-Deck** では *高速・高精度な検索体験* と
*デッキ編集～山札シミュレーション* をワンストップで提供します。

---

## 主な機能

| カテゴリ        | 機能                                                                           |
| ----------- | ---------------------------------------------------------------------------- |
| **カード検索**   | - 名前 / ひらがな / 技テキスト全文検索<br>- 進化段階・EX/非EX・HP・エネルギー・逃げコスト等の多段フィルター             |
| **デッキ構築**   | - ダブルタップでカード追加 / 長押しで削除<br>- デッキごとにメモ保存<br>- 山札シャッフル & 先頭5枚に“たねポケモン”がいる確率を確認 |
| **自動データ更新** | クラウド(JSON)に新カードを置くだけで **アプリ更新なし** で反映                                        |
| **UX 向上**   | - 階層型キャッシュで画像を即表示 & オフライン表示可<br>- TrueShadow でリッチな UI（※アセットはリポジトリ非同梱）        |

---

## 技術スタック

| レイヤ     | 採用技術 / ライブラリ                   | 目的                                 |
| ------- | ------------------------------ | ---------------------------------- |
| ゲームエンジン | Unity 2022.3.6f1 / C#          | クロスプラットフォーム開発                      |
| 非同期処理   | **UniTask**                    | Task より軽量な async/await             |
| リアクティブ  | **UniRx**                      | UI とデータを自動同期                       |
| データ取得   | UnityWebRequest + GitHub Pages | JSON / 画像を HTTP GET                |
| アーキテクチャ | **MV(R)P**                     | Model / View / (Reactive)Presenter |
| 画像キャッシュ | 3 階層 (Memory → Disk → Network) | 高速表示・通信量削減・バッテリ節約                  |
| UI      | TrueShadow, DOTween            | ソフトシャドウ・アニメーション                    |

---

## アーキテクチャ

### 1. MV(R)P パターン

```
+--------------+      ユーザー操作       +-----------+
|   SearchView |  --------------------▶ | SearchModel|
|   (画面)     | ◀--------------------  |(検索ロジック)|
+--------------+     結果通知           +-----------+
         ▲                                   ▲
         │             仲介・制御             │
         └───────── SearchPresenter ─────────┘
```

* **責務を分離**しテスト容易・拡張性高
* Model と View を疎結合に保ち、UI 追加も Presenter で完結

### 2. 階層型キャッシュ

```
[Memory] → [Disk (persistentDataPath)] → [Network]
```

1. **メモリ**命中なら待ち時間ゼロ
2. 不命中時は **ディスク**へ（オフライン可 / 通信量削減）
3. 両方に無ければ **ネットワーク**取得 → 上位層へ保存

> 低 RAM 端末でも OOM を防ぎ、古端末でも安定動作。

---

## 設計・実装のポイント

| 項目              | 具体策                                                        |
| --------------- | ---------------------------------------------------------- |
| **Reactive UI** | `Observable.EveryUpdate()` + `Throttle` で検索入力を 0.3 s デバウンス |
| **画像遅延読み込み**    | `SimpleVirtualScroll` 内で表示領域に入ったカードのみ `UniTask` で取得        |
| **段階的初期化**      | `UniTask.WhenAll()` で *DB 読込* → *キャッシュ起動* → *検索 UI* を順次    |
| **自動カード追加**     | GitHub Actions で JSON を差し替え → 起動時に最新版をフェッチ                 |
| **コメント規約**      | すべてのクラス / メソッドに “目的→処理→戻り値” を XMLDoc で記述                   |

---

## ビルド方針と配布バイナリ

> **⚠ リポジトリには `.cs` & ドキュメントのみ**（画像・Prefab など無し）

| シチュエーション       | ビルド可否       | 理由                |
| -------------- | ----------- | ----------------- |
| リポジトリ clone 直後 | ❌ **不可**    | TrueShadow や画像が欠落 |
| 下記バイナリ利用       | ✅ **実行のみ可** | 端末にインストールして動作確認   |

| プラットフォーム    | インストール方法                                                                                                                                                                                |
| ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **iOS**     | TestFlight → [https://testflight.apple.com/join/EQM3bd2Q](https://testflight.apple.com/join/EQM3bd2Q)                                                                                   |
| **Android** | APK 直リンク → [https://drive.google.com/drive/folders/1Zr6jSzu8LZTCF0Eaj9QZ0nzhCK8mNAhm?usp=sharing](https://drive.google.com/drive/folders/1Zr6jSzu8LZTCF0Eaj9QZ0nzhCK8mNAhm?usp=sharing) |

---

## 著者

**吉田 月輝 / Yoshida Runaki**
*文系学部出身・2024 年 4 月から独学で Unity を開始。*
1200 h 以上学習し、本アプリで **企画→実装→公開→テスター募集（20 名）** まで自走しました。

> 「実務の現場で学びながら、早期に貢献できるエンジニアを目指します」

---

## ライセンス / 権利表記

* 本リポジトリの **ソースコード**は MIT License
* 画像・サウンド等の **ゲーム素材は非同梱**（ライセンス保護のため）
* Pokémon / Nintendo / Creatures Inc. / GAME FREAK inc. に関する **商標・著作権は各社に帰属**
* 権利者様からの要請があった場合は速やかに対応します

---

> **GitHub**: [https://github.com/noutetu/P\_Deck](https://github.com/noutetu/P_Deck)
> **デモ動画**: [https://youtu.be/u2qqIGt1MHE](https://youtu.be/u2qqIGt1MHE)
