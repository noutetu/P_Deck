using System;
using UnityEngine;

namespace PokeDeck.Search.Filters.Base
{
    // ----------------------------------------------------------------------
    // 全てのフィルターエリアの基底となる抽象クラス。
    // IFilterAreaインターフェースを実装します。
    // ----------------------------------------------------------------------
    public abstract class BaseFilterArea : MonoBehaviour, IFilterArea
    {
        // ----------------------------------------------------------------------
        // フィルター条件が変更された時に発行されるイベント。
        // ----------------------------------------------------------------------
        public event Action OnFilterChanged;

        // ----------------------------------------------------------------------
        // 現在のフィルター設定をSearchModelに適用します。
        // 具象クラスで実装する必要があります。
        // @param model 適用対象のSearchModel。
        // ----------------------------------------------------------------------
        public abstract void ApplyFilterToModel(SearchModel model);

        // ----------------------------------------------------------------------
        // フィルター設定をリセットします。
        // 具象クラスで実装する必要があります。
        // ----------------------------------------------------------------------
        public abstract void ResetFilters();

        // ----------------------------------------------------------------------
        // UnityのStartライフサイクルメソッド。
        // 必要に応じて具象クラスでオーバーライドして使用します。
        // ----------------------------------------------------------------------
        protected virtual void Start()
        {
            // 共通の初期化処理があればここに記述
        }

        // ----------------------------------------------------------------------
        // OnFilterChangedイベントを発行します。
        // ----------------------------------------------------------------------
        protected void InvokeOnFilterChanged()
        {
            OnFilterChanged?.Invoke();
        }
    }
}
